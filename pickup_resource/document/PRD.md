# 总体需求文档（PRD，面向产品经理）


## 1. 产品定位与目标
- 产品定位：聚焦“高效找码、隐私可控、固定群体代取协作”的取件码管理工具，支持离线/AI 双模式。
- 产品目标：
  - 高效：尽量减少手动录入与找码成本，让“待取件”随时可查。
  - 可控：用户可选择纯离线使用，数据留在本机。
  - 协作：面向家庭/同事等固定群体的代取协同（后续阶段落地）。

## 2. 目标用户与核心场景
- 隐私敏感型：只使用离线模式，拒绝上传/联网。
- 效率优先型：希望自动整理待取件，快速复制取件码完成取件。
- 协同代取型：共享代取信息与取件状态，避免重复取件（后续阶段）。

## 3. 平台与能力边界（产品口径）
- Android：支持“短信自动识别生成记录”。
- iOS：受系统限制不支持后台自动读取/监听短信；提供“粘贴导入/手动补录”完成同等管理能力。

## 4. 版本范围

### 4.1 一期（MVP，P0）
- 离线模式闭环（Android 自动识别 + iOS 导入/手动）：
  - 取件码记录管理（新增、查看、编辑、删除、分类）
  - 待取优先展示与搜索筛选
  - 本地提醒（不依赖联网）
  - 桌面小组件展示待取摘要（iOS/Android）
- AI 模式：仅提供入口与说明、保留后续扩展位点（不承诺云端识别/小组协作上线）。

### 4.2 二期（P1，规划）
- AI 识别：在用户授权联网的前提下提升识别成功率与适配速度。
- 小组代取协作：小组创建/加入、代取记录共享、状态协同同步。
- （可选）多设备同步、权限细分等。

### 4.3 明确不做（至少一期不做）
- 商业化（驿站入驻、优惠推送、代取上门等）
- 非短信来源识别（微信/其他 App 推送）
- 公网链接分享、快递轨迹、扫码取件
- 广告、会员付费、社交打卡

## 5. 核心概念与数据定义（产品口径）
- 模式：
  - 离线模式：无需注册；数据仅本机；不包含需要联网的能力。
  - AI 模式：需要联网与账号能力（规划中）。
- 取件记录（Pickup）字段：
  - 取件码（必填）
  - 驿站/站点名称（可选）
  - 到期时间（可选）
  - 状态：待取 / 已取 / 已逾期 / 异常
  - 来源：短信自动 / 粘贴导入 / 手动补录
  - 备注（可选）

## 6. 功能需求（按模块）

### 6.1 取件码自动/半自动识别
- Android：在用户授权后，尽可能自动从短信中提取取件码、驿站名称、到期时间并生成记录。
- iOS：用户通过“粘贴导入”触发识别，或手动补录。
- 识别失败时：必须允许用户手动纠正并保存为“可复用的识别模板/规则”（提升后续命中）。

### 6.2 取件记录管理
- 分类展示：待取/已取/已逾期/异常
- 列表能力：搜索（驿站/关键字/日期）、筛选（到期/驿站等）、批量删除
- 快捷操作：复制取件码、一键标记已取/异常

### 6.3 便捷查看（小组件）
- iOS/Android：小组件仅展示“待取摘要”（取件码可支持隐藏策略），点击进入 App 查看详情。

### 6.4 本地提醒
- 用户可配置提醒策略（例如到期前 N 时间/固定时段/免打扰）。
- 提醒方式为本地通知，不依赖联网。

### 6.5 模式切换与数据隔离
- 用户可在离线/AI 模式间切换（一期 AI 为占位入口）。
- 数据隔离：不同模式的数据不混用；离线模式不出现需要联网的入口。

## 7. 业务规则（P0）
- 逾期判定：到期时间早于当前时间且仍为“待取”则显示为“已逾期”。
- 状态流转：
  - 待取 -> 已取
  - 待取/已逾期 -> 异常
  - 已取/异常支持回退（是否允许由产品最终确认，默认允许回退到待取）
- 隐私展示：
  - 小组件默认支持“隐藏完整取件码”（如仅显示后 4 位），在 App 内可查看完整信息。

## 8. 权限与合规（产品说明口径）
- Android：短信权限用于“从短信提取取件信息并自动生成记录”；通知权限用于“到期提醒”。
- iOS：通知权限用于“到期提醒”。
- 用户可随时在系统设置中撤销权限，撤销后产品应提供可用的降级路径（粘贴导入/手动补录）。

## 9. 验收标准（一期 P0）
- Android：授权后可从真实短信自动生成待取记录；列表可查、可编辑、可标记已取；小组件与提醒正常工作。
- iOS：通过粘贴导入/手动补录可稳定生成记录；列表/提醒/小组件正常工作。
- 离线模式：无需注册即可完整使用离线闭环；不依赖联网完成核心任务。
